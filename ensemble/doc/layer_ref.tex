%\newcommand {\layerdef}[1]	{\subsection{{#1} Protocol Layer}}
%\newcommand {\stackdef}[1]	{\subsection{{#1} Protocol Stack}}
%\newcommand {\parameters}[0]	{\paragraph{Parameters} ~\par}
%\newcommand {\generates}[0]	{\paragraph{Generated Events} ~\par}
%\newcommand {\properties}[0]	{\paragraph{Properties} ~\par}
%\newcommand {\protocol}[0]	{\paragraph{Protocol} ~\par}
%\newcommand {\notes}[0]	{\paragraph{Notes} ~\par}
%\newcommand {\sources}[0]	{\paragraph{Sources} ~\par}
%\newcommand {\testing}[0]	{\paragraph{Testing} ~\par}

\newenvironment{Layer}[1]	{\subsection{{#1}}}{}
\newenvironment{Stack}[1]	{\subsection{{#1}}}{}

\newenvironment{GenEvent}{%
\paragraph{Generated Events} ~\par
\begin{quote}\begin{tabular}{|l|} \hline
}{\end{tabular}\end{quote}
}
\newcommand {\genevent}[1]	{#1 \\ \hline}

\newenvironment{Protocol}{%
\paragraph{Protocol} ~\par
\begin{quote}
}{\end{quote}}

\newenvironment{Sources}{%
\paragraph{Sources} ~\par
\begin{quote}\begin{tabular}{|l|} \hline
}{\end{tabular}\end{quote}
}
\newcommand {\sourcesfile}[1]	{layers/#1 \\ \hline}

\newenvironment{Parameters}{%
\paragraph{Parameters}~\par\begin{itemize}
}{\end{itemize}}

\newenvironment{Properties}{%
\paragraph{Properties} ~\par\begin{itemize}
}{\end{itemize}}

\newenvironment{Notes}{%
\paragraph{Notes} ~\par\begin{itemize}
}{\end{itemize}}

\newenvironment{Testing}{%
\paragraph{Testing} ~\par\begin{itemize}
}{\end{itemize}}

\section{Layers and Stacks}

We document a subset of the \ensemble\ layers and stacks (compositions of
layers) in this section.  This documentation is intended to be largely
independent of the implementation language.  They are currently listed in
order, bottom-up, of their use in the VSYNC layer.

Each layer (or stack) has these items in its documentation:

\begin{Layer}{ANYLAYER}
The name of the layer follwed by a general description of its purpose.

\begin{Protocol}
A description of the protocol implemented by the layer.
\end{Protocol}

\begin{Parameters}
\item The list of parameters required to initialize the layer, along with
descriptions of their purpose.
\item \note{should also specify reasonable values}
\item If a layers takes no arguments, the documentation specifies
``None.''
\end{Parameters}

\begin{Properties}
\item A list of informal properties of the layer.
\end{Properties}

\begin{Notes}
\item General notes about the layer.
\end{Notes}

\paragraph{Sources} ~\par
The source files for the ML implementation of the layer.

\paragraph{Generated Events} ~\par
A list of event types generated by the layer.  In the future, this field
will contain more information, such as what event types are examined by
the layer (instead of being blindly passed on).  Hopefully, this
information will eventually be generated automatically.

\begin{Testing}
\item Information about the status of the layer regarding testing.
\item Testing information should always be documented: if the layer has
  not been tested, that should be stated.
\item What testing has been completed on the layer (along with version
  information).
\item What infrastracture is in place for testing the layer.
\item Known bugs for a layer are listed in the ML source code.
\end{Testing}
\end{Layer}

\include{layers/credit}
\include{layers/rate}
\include{layers/bottom}
\include{layers/causal}
\include{layers/elect}
\include{layers/encrypt}
\include{layers/heal}
\include{layers/inter}
\include{layers/intra}
\include{layers/leave}
\include{layers/merge}
\include{layers/mflow}
\include{layers/mnak}
\include{layers/optrekey}
\include{layers/perfrekey}
\include{layers/primary}
\include{layers/pt2pt}
\include{layers/pt2ptw}
\include{layers/pt2ptwp}
\include{layers/realkeys}
\include{layers/rekey}
\include{layers/rekey_dt}
\include{layers/rekey_diam}
\include{layers/secchan}
\include{layers/sequencer}
\include{layers/slander}
\include{layers/stable}
\include{layers/suspect}
\include{layers/sync}
\include{layers/totem}
\include{layers/window}
\include{layers/xfer}
\include{layers/zbcast}
\include{vsync}
