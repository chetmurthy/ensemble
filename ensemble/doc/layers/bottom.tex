\begin{Layer}{BOTTOM} 

Not surprisingly, the BOTTOM layer is the bottommost layer in a \ensemble\
protocol stack.  It interacts directly with the communication transport by
sending/receiving messages and scheduling/handling timeouts.  The properties
implemented are all \emph{local} to the protocol stack in which the layer
exists: ie., a DnFail event causes failed members to be removed from the local
view of the group, but no failure message to be sent out--it is assumed that
some other layer actually informs the other members of the failure.

\begin{Protocol}
None
\end{Protocol}

\begin{Parameters}
\item None
\end{Parameters}

\begin{Properties}
\item
Requires messages be appropriately fragmented for the transport in use.
\item
\DnTimer\{time\} events cause an alarm to be scheduled with the transport so
that an \UpTimer\ event is later delivered some time after $time$.
\item
\DnBlock, \DnView, \DnStable, and \DnFail\ events cause an \UpBlock,
\UpView, \UpStable, and \UpFail event (respectively) to be locally
``bounced'' up the protocol stack.  No communication results from these
events.
\item
In addition, \DnFail\ events cause further Send and Cast messages from the
failed members to be dropped.
\item
\DnView\ events do not affect the membership in the current protocol stack.
The view in the resulting \UpView\ event is merely a proposal for the next
view of the group.  (It is expected that a new protocol stack will be
created for that view.)
\item
\DnSend, \DnCast\ events cause messages to be sent (unreliably) to other
members in the group.  The resulting \UpSend\ and \UpCast\ events are delivered
with the origin field set with the rank of the sender and the time field
set with the time that the messages was received (according to the
transport).
\item
\DnMerge, \DnMergeDenied, and \DnMergeGranted\ causes messages to be sent
(unreliably) to members outside of the group.  These result in
\UpMergeRequest, \UpMergeDenied, and \UpMergeGranted\ messages at the
destination, respectively.
\item
\DnLeave\ events disable the transport instance and bounce up an \UpExit
event.  No further events are delivered after the \UpExit. \note{currently,
this may not be true}
\end{Properties}

\begin{Sources}
\sourcesfile{bottom.ml}
\end{Sources}

\begin{GenEvent}
\genevent{\UpBlock}
\genevent{\UpCast}
\genevent{\UpExit}
\genevent{\UpFail}
\genevent{\UpStable}
\genevent{\UpMergeDenied}
\genevent{\UpMergeGranted}
\genevent{\UpMergeRequest}
\genevent{\UpSend}
\genevent{\UpSuspect}
\genevent{\UpTimer}
\genevent{\UpView}
\end{GenEvent}

\begin{Testing}
\item see the VSYNC stack
\end{Testing}
\end{Layer}
