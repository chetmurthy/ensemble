<!-- File: Maestro_GroupMember.htm -->
<!-- Author: Mark Hayden (formatted for html by Alexey Vaysburd) -->
<!-- Contents: Ensemble Membership Service --> 
<!-- Created: May 1997 -->

<html>

<head>
<title>Ensemble Membership Service</title>
<link rev="made" href="mailto:hayden@cs.cornell.edu (Mark Hayden)">
</head>

<BODY TEXT="#000000" BGCOLOR="#FCD5AD" LINK="#0000FF" VLINK="#551A8B" ALINK="#FF0000">
<TABLE WIDTH="800" >
<TR>
<TD ALIGN=LEFT VALIGN=TOP WIDTH="100"><IMG SRC="maestro-logo.jpg" VSPACE=20 HSPACE=20 HEIGHT=105 WIDTH=70 ALIGN=LEFT></TD>

<TD WIDTH="500" BORDER="0">
<H1>Ensemble Membership Service</H1>
</TD>
</TR>
</TABLE>

This document is a part of online 
<a href="http://www.cs.cornell.edu/Info/Projects/Ensemble/index.htm">
Ensemble</a> documentation.  See also 
<a href="Maestro.htm">Maestro Open Toolkit</a>.
<hr>

<h2>
<a name="Ensemble Membership Service">Ensemble Membership Service</a>
</h2>

Normally, Ensemble application groups implement their own group membership
protocol.  However, they have the option of using the Ensemble membership
service implemented by the <tt>groupd</tt> application.  <tt>groupd</tt> is a
service for managing multiple process groups.  It uses a <em>core</em> 
group of
Ensemble processes to participate in managing these groups.  Clients connect
to the service via TCP connections, through which they request to join and
leave groups.  The service supports a simple protocol through which the clients
can obtain virtual synchronous properties.  The service also supports weaker
properties that give faster membership notifications.

<p>
<em>We emphasize that Ensemble applications can operate independently of a
membership service.</em>

<p>
Some of the benefits of using this service are:
<li>
When there are no membership changes, the clients communicate directly between
themselves, so the membership service has no affect on performance.
<li>
The service implements group membership for multiple groups.  The costs of the
group membership protocols (such as failure detection) are shared over the
groups.
<li>
Because applications are sharing the same membership service, they see
consistent views and failure detections.
<li>
The client part of the protocol for implementing virtual synchrony is
simple.  Most of the complexity is in the server.  This allows client
programs to be implemented in languages other than ML, but save much
of the programming burden because the servers handle the ``hard''
group membership protocols.  The client TCP interface is described in
the <a href="../ref.ps">Ensemble reference manual</a>.
<li>
Applications that do not need the full virtual synchrony properties can use
weaker synchronization protocols and get faster view changes.
<li>
The service allows groups to scale to larger sizes.  The membership servers do
not need to run on all the hosts on which the clients run, so clients can be on
more hosts than are normally supported by Ensemble.

<p>
<h2>
<a name="Starting Membership Service">Starting Membership Service</a>
</h2>

In order to start membership service, 
set the <tt>ENS_GROUPD_PORT</tt> environment
variable to select the TCP port for the service to use.  The membership service
is executed through the <tt>groupd</tt> application program:

<p>
<tt>% groupd</tt>

<p>
It takes command-line arguments similar to the other Ensemble demonstration
programs.  Normally, each host runs a server.

<p>
Other demo applications use the service when the <tt>-groupd</tt> command-line
argument is selected.  For example:

<p>
<tt>% mtalk -groupd</tt>

<p>
Note that you must have a <tt>groupd</tt> server running on the same host as
mtalk for this to work.

<h2>
<a name="Configuration Parameters">Configuration Parameters</a>
</h2>

<li><tt>-groupd_port port</tt>: 
sets the port that the membership <tt> groupd</tt> servers use.

<li><tt>-groupd_hosts arg</tt>: sets the hosts that the membership
<tt>groupd</tt> servers use.  Format is the same as for 
<tt>-gossip_hosts</tt>.

<li>
<tt>-groupd</tt>: Use the membership service on the local host. 
This option may override others.

<p><hr>
<address>
send mail to
<a href="mailto:hayden@cs.cornell.edu">hayden@cs.cornell.edu</a>
</address>

</body>
</html>
